\chapter{Absolute Difference 7x7 Window Code Snippet}
\label{sec:appdxB}

\definecolor{mygreen}{rgb}{0,0.6,0}

\lstset{
	language=VHDL,
	basicstyle=\footnotesize,
	commentstyle=\color{mygreen},
	keywordstyle=\color{blue}, 
	tabsize=3
}

\begin{lstlisting}

-- Assign greater value to more and smaller to less
-- Loop is unrolled in hardware, 7 assignments occur simultaneously
FOR i IN 0 TO 6 LOOP
	IF (search_window(ndx+(7*i)) < template_window(ndx+(7*i))) THEN 
		more(i) <= template_window(ndx + (7*i));
		less(i) <= search_window(ndx + (7*i));
	ELSE
		less(i) <= template_window(ndx + (7*i));
		more(i) <= search_window(ndx + (7*i));
	END IF;
END LOOP;

-- Subtraction IP CORE, sub(i) = more(i) - less(i)
g_differ_10 : FOR i IN 0 TO 6 GENERATE
	i_subber : adder_10
		PORT MAP (
			a => more(i),
			b => less(i),
			s => sub(i)
		);
END GENERATE g_differ_10;

\end{lstlisting}